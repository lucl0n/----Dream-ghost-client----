(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-tickets"],{"00df":function(e,t,c){},"04d1":function(e,t,c){var n=c("342f"),r=n.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},"1b28":function(e,t,c){},"276c":function(e,t,c){},4543:function(e,t,c){},"4e82":function(e,t,c){"use strict";var n=c("23e7"),r=c("e330"),o=c("59ed"),a=c("7b0b"),l=c("07fa"),i=c("577e"),s=c("d039"),u=c("addb"),d=c("a640"),b=c("04d1"),p=c("d998"),k=c("2d00"),j=c("512c"),O=[],f=r(O.sort),m=r(O.push),v=s((function(){O.sort(void 0)})),g=s((function(){O.sort(null)})),h=d("sort"),_=!s((function(){if(k)return k<70;if(!(b&&b>3)){if(p)return!0;if(j)return j<603;var e,t,c,n,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:c=3;break;case 68:case 71:c=4;break;default:c=2}for(n=0;n<47;n++)O.push({k:t+n,v:c})}for(O.sort((function(e,t){return t.v-e.v})),n=0;n<O.length;n++)t=O[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),y=v||!g||!h||!_,V=function(e){return function(t,c){return void 0===c?-1:void 0===t?1:void 0!==e?+e(t,c)||0:i(t)>i(c)?1:-1}};n({target:"Array",proto:!0,forced:y},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(_)return void 0===e?f(t):f(t,e);var c,n,r=[],i=l(t);for(n=0;n<i;n++)n in t&&m(r,t[n]);u(r,V(e)),c=r.length,n=0;while(n<c)t[n]=r[n++];while(n<i)delete t[n++];return t}})},"512c":function(e,t,c){var n=c("342f"),r=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},"5ebe":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-70372978"),e=e(),Object(n["popScopeId"])(),e},o={class:"button-bar"},a=Object(n["createTextVNode"])(" Back "),l={key:0,class:"wrap-right"},i=["disabled"],s=["disabled"],u=["disabled"],d={key:0},b={class:"first"},p={class:"block info bg-light rounded p"},k=["data-state"],j={class:"info__list"},O=r((function(){return Object(n["createElementVNode"])("li",{class:"info__list__title"},"Title",-1)})),f={class:"info__list__title"},m=Object(n["createTextVNode"])(" Category "),v={class:"info__list__title"},g=Object(n["createTextVNode"])(" Creator "),h={key:0},_={key:1},y={class:"info__list__title"},V=Object(n["createTextVNode"])(" Created on "),N={class:"info__list__title"},x=Object(n["createTextVNode"])(" Assigned Staff ");function w(e,t,c,r,w,C){var E=Object(n["resolveComponent"])("icon"),B=Object(n["resolveComponent"])("router-link"),T=Object(n["resolveComponent"])("TicketBlock"),S=Object(n["resolveComponent"])("Loader"),D=Object(n["resolveComponent"])("TicketReplies"),A=Object(n["resolveComponent"])("StaffAssigner");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",o,[Object(n["createVNode"])(B,{to:{name:"dashboard.tickets"},class:"button button--icon back"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{class:"button__icon",icon:"chevron-left"}),a]})),_:1},8,["to"]),e.loadingTicket?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[0===e.ticket.state?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[e.access>=2?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,disabled:e.working,class:"button button--primary",onClick:t[0]||(t[0]=function(t){return e.assigningStaff=!0})}," Assign Staff ",8,i)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("button",{disabled:e.working,class:"button",onClick:t[1]||(t[1]=function(){return e.closeTicket&&e.closeTicket.apply(e,arguments)})}," Close Ticket ",8,s)],64)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("button",{disabled:e.working,class:"button button--warning",onClick:t[2]||(t[2]=function(){return e.deleteTicket&&e.deleteTicket.apply(e,arguments)})}," Delete Ticket ",8,u)]))]),Object(n["createVNode"])(n["Transition"],{class:"slide"},{default:Object(n["withCtx"])((function(){return[e.loadingTicket?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",d,[Object(n["createElementVNode"])("div",b,[Object(n["createVNode"])(T,{ticket:e.ticket,class:"ticket"},null,8,["ticket"]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("h2",null,[Object(n["createVNode"])(E,{icon:"ticket-alt"}),Object(n["createTextVNode"])(" Ticket #"+Object(n["toDisplayString"])(e.ticket.id)+" ",1),Object(n["createElementVNode"])("span",{"data-state":e.ticket.state,class:"ticket__state"},Object(n["toDisplayString"])(e.stateNames[e.ticket.state]),9,k)]),Object(n["createElementVNode"])("ul",j,[O,Object(n["createElementVNode"])("li",null,Object(n["toDisplayString"])(e.ticket.title),1),Object(n["createElementVNode"])("li",f,[Object(n["createVNode"])(E,{icon:"book"}),m]),Object(n["createElementVNode"])("li",null,Object(n["toDisplayString"])(e.categoryNames[e.ticket.category]),1),Object(n["createElementVNode"])("li",v,[Object(n["createVNode"])(E,{role:e.ticket.owner.access,class:"icon__role",icon:"user"},null,8,["role"]),g]),e.access>2?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",h,[Object(n["createVNode"])(B,{to:{name:"dashboard.manage.users.view",params:{user:e.ticket.owner.id}},class:"remove__link"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.ticket.owner.username),1)]})),_:1},8,["to"])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",_,Object(n["toDisplayString"])(e.ticket.owner.username),1)),Object(n["createElementVNode"])("li",y,[Object(n["createVNode"])(E,{icon:"clock"}),V]),Object(n["createElementVNode"])("li",null,Object(n["toDisplayString"])(e.date),1),null!==e.ticket.assigned?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("li",N,[Object(n["createVNode"])(E,{role:null!==e.ticket.assigned&&e.ticket.assigned.access,class:"icon__role",icon:"user"},null,8,["role"]),x]),Object(n["createElementVNode"])("li",null,Object(n["toDisplayString"])(null!==e.ticket.assigned&&e.ticket.assigned.username),1)],64)):Object(n["createCommentVNode"])("",!0)])])])]))]})),_:1}),e.loadingTicket?(Object(n["openBlock"])(),Object(n["createBlock"])(S,{key:0,class:"loader--n"})):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])(D,{"parent-loading":e.loadingTicket,ticket:e.ticket,onDone:t[3]||(t[3]=function(t){return e.working=!1}),onWorking:t[4]||(t[4]=function(t){return e.working=!0})},null,8,["parent-loading","ticket"]),e.access>=2?(Object(n["openBlock"])(),Object(n["createBlock"])(A,{key:0,id:e.ticket.id,visible:e.assigningStaff,onClose:e.handleSelect},null,8,["id","visible","onClose"])):Object(n["createCommentVNode"])("",!0)],64))])}var C=c("1da1"),E=(c("96cf"),c("c1df")),B=c.n(E),T=c("85ee"),S=c("6c02"),D=c("5502"),A=c("eef9"),R=c("79f6"),I=c("446e"),F=c("d49f"),M=c("555f"),L=c("7583"),Y=c("3c9e"),U=c("7f37"),z=Object(n["defineComponent"])({components:{TicketBlock:U["a"],TicketReplies:Y["a"],StaffAssigner:L["a"],Loader:M["a"],TextArea:F["a"],TextInput:I["a"]},setup:function(){var e=Object(S["d"])(),t=e.push,c=Object(D["b"])(),r=c.state,o=Object(S["c"])(),a=o.params,l=a.ticket,i=Object(n["ref"])(!0),s=Object(n["ref"])(!1),u=Object(n["ref"])(T["d"]),d=Object(n["ref"])(!1),b=Object(n["ref"])("");function p(){return k.apply(this,arguments)}function k(){return k=Object(C["a"])(regeneratorRuntime.mark((function e(){var c,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R["l"].getTicket(l);case 3:c=e.sent,n=c.data,u.value=n,b.value=B()(n.created_at).format("DD/MM/YYYY h:mm a"),i.value=!1,e.next=16;break;case 10:return e.prev=10,e.t0=e["catch"](0),console.error(e.t0),e.next=15,t({name:"dashboard.tickets"});case 15:Object(A["g"])("error","Unable to load ticket");case 16:case"end":return e.stop()}}),e,null,[[0,10]])}))),k.apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return O=Object(C["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(A["b"])("Confirm Close","Are you sure that you want to close this ticket? Tickets can not be reopened and you will need to create a new one.");case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,Object(A["f"])(),e.next=9,R["l"].setTicketState(u.value.id,1);case 9:u.value.state=1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](5),console.error(e.t0),Object(A["g"])("error","Failed to close ticket");case 16:return e.prev=16,Object(A["c"])(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,12,16,19]])}))),O.apply(this,arguments)}function f(){return m.apply(this,arguments)}function m(){return m=Object(C["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(A["b"])("Confirm Delete","Are you sure that you want to delete this ticket?");case 2:if(c=e.sent,c){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,Object(A["f"])(),e.next=9,R["l"].deleteTicket(u.value.id);case 9:return e.next=11,t({name:"dashboard.tickets"});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](5),console.error(e.t0),Object(A["g"])("error","Failed to delete ticket");case 17:return e.prev=17,Object(A["c"])(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,13,17,20]])}))),m.apply(this,arguments)}function v(e){d.value=!1,null!==e&&(u.value.assigned=e)}return Object(n["onMounted"])(p),{access:r.user.access,loadingTicket:i,working:s,ticket:u,assigningStaff:d,date:b,handleSelect:v,categoryNames:T["f"],stateNames:T["k"],closeTicket:j,deleteTicket:f}}}),q=(c("8328"),c("6b0d")),G=c.n(q);const J=G()(z,[["render",w],["__scopeId","data-v-70372978"]]);t["default"]=J},"65df":function(e,t,c){"use strict";c("4543")},"764a":function(e,t,c){"use strict";c("1b28")},"7db0":function(e,t,c){"use strict";var n=c("23e7"),r=c("b727").find,o=c("44d2"),a="find",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},8328:function(e,t,c){"use strict";c("276c")},a5a7:function(e,t,c){"use strict";c("d3b7"),c("ddb0");var n=c("7a23"),r={class:"group"},o={class:"group__value"},a=["onClick"],l={class:"checkbox__box"},i={class:"checkbox__text"},s={class:"group__value"};function u(e,t,c,u,d,b){var p=Object(n["resolveComponent"])("icon");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("div",o,[Object(n["renderSlot"])(e.$slots,"group-start",{},void 0,!0)]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.values,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t.id},[Object(n["createVNode"])(n["Transition"],{name:"group-scale"},{default:Object(n["withCtx"])((function(){return[""===e.value||e.value===t.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:Object(n["normalizeClass"])([{"checkbox--checked":e.value===t.id},"checkbox group__value"]),onClick:function(c){return e.click(t)}},[Object(n["createElementVNode"])("div",l,[Object(n["createVNode"])(n["Transition"],{name:"scale"},{default:Object(n["withCtx"])((function(){return[e.value===t.id?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,class:"checkbox__box__icon",icon:"check"})):Object(n["createCommentVNode"])("",!0)]})),_:2},1024)]),Object(n["createElementVNode"])("p",i,Object(n["toDisplayString"])(t.text),1)],10,a)):Object(n["createCommentVNode"])("",!0)]})),_:2},1024)])})),128)),Object(n["createElementVNode"])("div",s,[Object(n["renderSlot"])(e.$slots,"group-end",{},void 0,!0)])])}var d=Object(n["defineComponent"])({emits:["update:modelValue"],props:{modelValue:{type:String,default:!1},values:{type:Array,required:!0}},setup:function(e,t){var c=t.emit,r=Object(n["toRef"])(e,"modelValue"),o=Object(n["computed"])({get:function(){return r.value},set:function(e){c("update:modelValue",e)}});function a(e){o.value==e.id?o.value="":o.value=e.id}return{value:o,click:a}}}),b=(c("c0c8"),c("6b0d")),p=c.n(b);const k=p()(d,[["render",u],["__scopeId","data-v-1db4b6f8"]]);t["a"]=k},ae38:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-57e68f7e"),e=e(),Object(n["popScopeId"])(),e},o={class:"center-wrapper"},a={class:"group"},l=["value"],i={class:"error"},s=r((function(){return Object(n["createElementVNode"])("p",{class:"detail"},"Enter your ticket details into the following text area. Please be as descriptive as possible to help us get your ticket resolved faster",-1)})),u={class:"body"},d={class:"group mt"},b=Object(n["createTextVNode"])(" Back "),p=["disabled"],k=Object(n["createTextVNode"])(" Submit Ticket ");function j(e,t,c,r,j,O){var f=Object(n["resolveComponent"])("TextInput"),m=Object(n["resolveComponent"])("TextArea"),v=Object(n["resolveComponent"])("icon"),g=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("form",{class:"create-ticket block",onSubmit:t[3]||(t[3]=Object(n["withModifiers"])((function(){return e.create&&e.create.apply(e,arguments)}),["prevent"]))},[Object(n["createElementVNode"])("div",a,[Object(n["createVNode"])(f,{id:"title",modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.title=t}),"max-length":80,"min-length":5,class:"group__span",icon:"ticket-alt",placeholder:"Ticket Title",required:"",type:"text"},null,8,["modelValue"]),Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.category=t}),class:"select button--grouped"},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.categoryNames,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e,value:t},Object(n["toDisplayString"])(e),9,l)})),128))],512),[[n["vModelSelect"],e.category]])]),Object(n["createElementVNode"])("p",i,Object(n["toDisplayString"])(e.error),1),s,Object(n["createElementVNode"])("div",u,[Object(n["createVNode"])(m,{id:"body",modelValue:e.body,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.body=t}),"max-length":1e3,"min-length":5,rows:10,class:"body__value",icon:"book",placeholder:"Start typing your ticket here..."},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",d,[Object(n["createVNode"])(g,{to:{name:"dashboard.tickets"},class:"button full-sized"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,{class:"button__icon",icon:"chevron-left"}),b]})),_:1},8,["to"]),Object(n["createElementVNode"])("button",{disabled:!e.valid,class:"button button--primary full-sized",type:"submit"},[Object(n["createVNode"])(v,{class:"button__icon",icon:"envelope"}),k],8,p)])],32)])}var O=c("1da1"),f=(c("96cf"),c("446e")),m=c("d49f"),v=c("d86a"),g=c("79f6"),h=c("85ee"),_=c("6c02"),y=c("eef9"),V=Object(n["defineComponent"])({components:{TextArea:m["a"],TextInput:f["a"]},setup:function(){var e=Object(_["d"])(),t=e.push,c=Object(n["ref"])(""),r=Object(n["ref"])(""),o=Object(n["ref"])(0),a=Object(n["ref"])(""),l=Object(n["computed"])((function(){return v["a"].valid("title")&&v["a"].valid("body")}));function i(){return s.apply(this,arguments)}function s(){return s=Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value="",l.value){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,Object(y["f"])(),e.next=7,g["l"].createTicket(c.value,r.value,o.value);case 7:return e.next=9,t({name:"dashboard.tickets"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),a.value=e.t0.message;case 14:return e.prev=14,Object(y["c"])(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])}))),s.apply(this,arguments)}return{title:c,body:r,category:o,valid:l,error:a,create:i,categoryNames:h["f"]}}}),N=(c("764a"),c("6b0d")),x=c.n(N);const w=x()(V,[["render",j],["__scopeId","data-v-57e68f7e"]]);t["default"]=w},b67e:function(e,t,c){"use strict";c("fc48")},bc7a:function(e,t,c){"use strict";c("d3b7"),c("ddb0");var n=c("7a23"),r={class:"bg-light filter"},o=["onClick"];function a(e,t,c,a,l,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.values,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:t.id,class:Object(n["normalizeClass"])([{filter__selected:e.value===t.id},"filter__item"]),onClick:function(c){return e.value=t.id},type:"button"},Object(n["toDisplayString"])(t.text),11,o)})),128))])}c("4de4");var l=Object(n["defineComponent"])({emits:["update:modelValue"],props:{modelValue:{type:String,default:!1},values:{type:Array,required:!0}},setup:function(e,t){var c=t.emit,r=e.values.filter((function(e){return null!==e})),o=Object(n["toRef"])(e,"modelValue"),a=Object(n["computed"])({get:function(){return o.value},set:function(e){c("update:modelValue",e)}});return{value:a,values:r}}}),i=(c("65df"),c("6b0d")),s=c.n(i);const u=s()(l,[["render",a],["__scopeId","data-v-483ce192"]]);t["a"]=u},c0c8:function(e,t,c){"use strict";c("00df")},d998:function(e,t,c){var n=c("342f");e.exports=/MSIE|Trident/.test(n)},f73e:function(e,t,c){"use strict";c.r(t);c("4de4");var n=c("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-0e54b28d"),e=e(),Object(n["popScopeId"])(),e},o=r((function(){return Object(n["createElementVNode"])("div",{class:"block"},[Object(n["createElementVNode"])("h1",{class:"block__title"},"Tickets"),Object(n["createElementVNode"])("p",{class:"block__text"}," Welcome to the tickets page. This is a place where you can create support tickets to get help from staff. Ensure that you select an appropriate tickets category so that we can get back to you as fast as possible. ")],-1)})),a={class:"toolbar"},l=Object(n["createTextVNode"])(" Create Ticket "),i={key:1,class:"toolbar__department button"},s={class:"group group--allow-wrap"},u=["disabled"],d={class:"tickets"},b={key:0,class:"ticket__blip"},p=["data-state"],k={class:"ticket__blip"},j={class:"ticket__title"},O={class:"ticket__buttons"},f=Object(n["createTextVNode"])(" View "),m=["disabled","onClick"],v=Object(n["createTextVNode"])(" Close "),g=["disabled","onClick"],h={key:1};function _(e,t,c,r,_,y){var V=Object(n["resolveComponent"])("icon"),N=Object(n["resolveComponent"])("router-link"),x=Object(n["resolveComponent"])("Filter"),w=Object(n["resolveComponent"])("Checkbox"),C=Object(n["resolveComponent"])("Loader");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[o,Object(n["createElementVNode"])("div",a,[e.user.access<2?(Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:0,to:{name:"dashboard.tickets.create"},class:"button button--primary toolbar__create"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{class:"button__icon",icon:"plus-circle"}),l]})),_:1},8,["to"])):Object(n["createCommentVNode"])("",!0),e.user.department>-1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",i,Object(n["toDisplayString"])(e.categoryNames[e.user.department]),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("button",{class:Object(n["normalizeClass"])([{"toolbar__sync--animate":e.loading},"button toolbar__sync"]),disabled:e.loading,onClick:t[0]||(t[0]=function(){return e.load&&e.load.apply(e,arguments)})},[Object(n["createVNode"])(V,{class:"toolbar__sync__icon",icon:"sync"})],10,u),e.user.access>1?(Object(n["openBlock"])(),Object(n["createBlock"])(x,{key:0,modelValue:e.settings.filter,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.settings.filter=t}),values:[{id:"any",text:"Any"},{id:"self",text:"Mine"},{id:"department",text:"Department"},{id:"assigned",text:"Assigned"},{id:"unassigned",text:"Unassigned"}]},null,8,["modelValue"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(w,{modelValue:e.settings.showClosed,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.settings.showClosed=t}),class:"options__value",text:"Show closed tickets"},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",d,[e.loading?(Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:0,class:"loader"})):(Object(n["openBlock"])(),Object(n["createBlock"])(n["TransitionGroup"],{key:1,name:"pop"},{default:Object(n["withCtx"])((function(){return[e.tickets.length>0?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(e.tickets,(function(t,c){var r;return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:c,class:"ticket"},[Object(n["createElementVNode"])("div",null,[null!==t.assigned&&(null===(r=t.assigned)||void 0===r?void 0:r.id)===e.user.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",b,"Assigned")):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",{"data-state":t.state,class:"ticket__state"},Object(n["toDisplayString"])(e.stateNames[t.state]),9,p),Object(n["createElementVNode"])("span",k,Object(n["toDisplayString"])(e.formatDate(t.created_at)),1)]),Object(n["createElementVNode"])("h3",j,Object(n["toDisplayString"])(t.title),1),Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(N,{disabled:e.working,to:{name:"dashboard.tickets.view",params:{ticket:t.id}},class:"button ticket__view"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{class:"button__icon",icon:"eye"}),f]})),_:2},1032,["disabled","to"]),0===t.state?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,disabled:e.working,class:"button ticket__close",onClick:function(n){return e.closeTicket(c,t.id)}},[Object(n["createVNode"])(V,{class:"button__icon",icon:"times"}),v],8,m)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("button",{disabled:e.working,class:"button ticket__delete",onClick:function(n){return e.deleteTicket(c,t.id)}},[Object(n["createVNode"])(V,{icon:"trash"})],8,g)])])})),128)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",h,"No results found...."))]})),_:1}))])])])}var y=c("1da1"),V=(c("96cf"),c("4e82"),c("7db0"),c("a434"),c("c1df")),N=c.n(V),x=c("85ee"),w=c("5502"),C=c("eef9"),E=c("79f6"),B=c("a5a7"),T=c("bc7a"),S=c("555f"),D=c("7737"),A=Object(n["defineComponent"])({components:{Filter:T["a"],CheckboxGroup:B["a"],Checkbox:D["a"],Loader:S["a"]},setup:function(){var e=Object(w["b"])(),t=e.state,c=t.user,r=Object(n["ref"])([]),o=Object(n["ref"])(!1),a=Object(n["ref"])(!1),l=Object(n["reactive"])({showClosed:!1,filter:"any"});function i(e){return N()(e).format("DD/MM/YYYY")}var s=function(e,t){var n=c.id;return null!=e.assigned&&null!=t.assigned?e.assigned.id==n?t.assigned.id==n?0:1:-1:null!=e.assigned?1:null!=t.assigned?-1:0};function u(){return d.apply(this,arguments)}function d(){return d=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,c,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o.value=!0,t=l.showClosed,c=l.filter,e.next=5,E["l"].getTickets(t,c);case 5:n=e.sent,a=n.data,r.value=a.sort(s).reverse(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error(e.t0),Object(C["g"])("error","Failed to load tickets");case 14:return e.prev=14,o.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])}))),d.apply(this,arguments)}function b(e,t){return p.apply(this,arguments)}function p(){return p=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(C["b"])("Confirm Close","Are you sure that you want to close this ticket? Tickets can not be reopened and you will need to create a new one.");case 2:if(o=e.sent,o){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,a.value=!0,i=r.value.find((function(e){return e.id==n})),e.next=10,E["l"].setTicketState(n,1);case 10:i&&(i.state=1),!l.showClosed&&c.access>1&&r.value.splice(t,1),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](5),console.error(e.t0),Object(C["g"])("error","Failed to close ticket");case 18:return e.prev=18,a.value=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[5,14,18,21]])}))),p.apply(this,arguments)}function k(e,t){return j.apply(this,arguments)}function j(){return j=Object(y["a"])(regeneratorRuntime.mark((function e(t,c){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(C["b"])("Confirm Delete","Are you sure that you want to delete this ticket?");case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,a.value=!0,e.next=9,E["l"].deleteTicket(c);case 9:r.value.splice(t,1),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](5),console.error(e.t0),Object(C["g"])("error","Failed to delete ticket");case 16:return e.prev=16,a.value=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,12,16,19]])}))),j.apply(this,arguments)}return Object(n["watch"])(l,u,{deep:!0}),Object(n["onMounted"])(u),{user:c,tickets:r,loading:o,working:a,settings:l,load:u,formatDate:i,categoryNames:x["f"],stateNames:x["k"],closeTicket:b,deleteTicket:k}}}),R=(c("b67e"),c("6b0d")),I=c.n(R);const F=I()(A,[["render",_],["__scopeId","data-v-0e54b28d"]]);t["default"]=F},fc48:function(e,t,c){}}]);
//# sourceMappingURL=group-tickets.e2727de8.js.map